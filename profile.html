<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Profile</title>
  <link rel="stylesheet" href="style.css">

  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js"></script>
</head>
<body>
  <div class="container">
    <h2>ðŸ‘¤ Profile</h2>
    <p id="name"></p>
    <p id="coins"></p>
  </div>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyB6b93A_HeU4FADs3o2Ysw6-dlRRS2TbZk",
      authDomain: "telegram-miniapp-e8cc0.firebaseapp.com",
      projectId: "telegram-miniapp-e8cc0",
      storageBucket: "telegram-miniapp-e8cc0.firebasestorage.app",
      messagingSenderId: "827930913054",
      appId: "1:827930913054:web:502b56e0c198d8e9ff410f"
    };
    const app = firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    // Telegram auto-login
    const tg = window.Telegram.WebApp;
    const userId = tg.initDataUnsafe.user?.id || "demoUser123";
    const userName = tg.initDataUnsafe.user?.first_name || "Guest";

    document.getElementById("name").innerText = `ðŸ‘¤ à¦¨à¦¾à¦®: ${userName}`;

    // Load coins
    async function loadCoins() {
      const userRef = db.collection("users").doc(userId);
      const docSnap = await userRef.get();
      if (docSnap.exists) {
        document.getElementById("coins").innerText = `ðŸ’° Coins: ${docSnap.data().coins}`;
      } else {
        document.getElementById("coins").innerText = "ðŸ’° Coins: 0";
      }
    }
    loadCoins();
  </script>
</body>
</html>
